---
name: implement-design
description: "按技术设计实现代码。在实现阶段激活，逐步生成代码并等待用户确认。"
---

# Skill: implement-design

## 目的

按已确认的技术设计逐步实现代码。

## 触发条件

- 由 implementation-executor 在「implementing」阶段调用
- 设计已确认且可获取

## 输入

- design.md 路径
- 已加载的代码风格规范
- 检索到的代码模式

## 流程

### 步骤 1：读取设计

加载 `.cantrip/workspace/{task-id}/design.md`

### 步骤 2：读取实现计划

从设计中提取有序任务列表。

### 步骤 3：逐项实现

对每个任务：

1. **展示任务说明**
2. **生成代码**
3. **预览代码**
4. **等待用户确认**
5. **保存文件**
6. **更新 notes.md**

### 约定：脚本放置位置

当实现涉及**临时或一次性脚本**（如 codegen 的 .bat/.sh、生成器）时：

- **不要**在项目源码目录下创建（如 `Tools/`、`Scripts/`、`client/`），以免污染仓库、混淆正式工具与临时产物。
- **应**在**临时目录**中创建并运行，例如：
  - `{项目根}/.tmp/`（确保 .tmp/ 在 .gitignore 中），或
  - 系统临时目录（`$TMPDIR` / `%TEMP%`）。
- 仅当脚本是**长期保留的项目工具**且会被提交和文档化时，才放入 `Tools/` 等目录。

### 步骤 4：处理问题

若出现问题：
- 在 notes.md 中记录
- 询问是否修改设计
- 继续或暂停

## 每项任务输出

```
🔨 任务：{任务说明}

**文件**：{path}

**代码**：
```{language}
{generated code}
```

---
确认此实现？
[确认] [修改] [跳过]
```

## notes 更新

`.cantrip/workspace/{task-id}/notes.md` 中记录进度、问题与关键代码片段。

## 最终输出

```
✅ 实现完成

**完成任务**：{n}/{total}
**修改文件**：{list}
**新增文件**：{list}

**摘要**：
{实现内容简要说明}

是否继续测试？
```
